# 전기장판 무선 컨트롤러 추가 프로젝트 (Wireless Electric Blanket Controller)

## 1. 개요
기존의 유선 전기장판(또는 온수매트) 컨트롤러를 ESP32, 리모컨, 또는 무선 버튼을 사용하여 스마트 홈에 통합하거나 원격 제어할 수 있도록 개조하는 프로젝트.

## 2. 주요 접근 방식

### A. 스마트 플러그 (비파괴 방식)
- **대상:** 물리적 전원 스위치가 딸깍하고 고정되는 방식(래치 방식)이거나, 전원을 껐다 켜도 이전 상태가 복구되는 모델.
- **장점:** 개조가 필요 없어 가장 안전함.
- **단점:** 소프트터치 방식(전원을 켜야 작동 시작) 모델에는 사용 불가.

### B. 버튼 시뮬레이션 (내부 개조 - 추천)
- **방법:** 컨트롤러 내부의 택트(Tact) 버튼에 병렬로 와이어를 납땜하고, ESP32가 릴레이나 포토커플러를 통해 버튼 클릭을 흉내냄.
- **부품:** ESP32, 포토커플러(PC817) 또는 소형 신호용 릴레이.
- **특징:** 원래의 안전 로직(자동 꺼짐 등)을 그대로 유지하면서 제어 가능.

### C. 전력 제어 (TRIAC/SSR - 위험/비추천)
- **방법:** 기존 컨트롤러를 제거하고 TRIAC이나 SSR을 사용하여 AC 전력을 직접 제어.
- **단점:** 화재 및 감전 위험이 매우 높으며, 기존의 안전 장치가 무력화될 수 있음.

## 3. 필요 하드웨어 사양
- **메인 칩:** ESP32 (WiFi/BLE 지원)
- **절연 부품:** **포토커플러(PC817)** - ESP32의 3.3V 로직과 컨트롤러의 전원을 분리하여 보호.
- **전원 공급:** 컨트롤러 내부 DC 전압을 벅 컨버터로 낮추거나, Hi-Link AC-DC 모듈(HLK-PM01 등) 사용.
- **트리거:** Zigbee 무선 버튼, 스마트폰 앱 (Home Assistant, ESPHome 등).

## 4. 안전 주의사항 (반드시 준수)
- **절연(Isolation):** 컨트롤러 내부는 220V AC가 흐르므로 ESP32와 컨트롤러 사이는 반드시 포토커플러나 릴레이로 물리적 절연을 해야 함.
- **화재 예방:** 제어 소프트웨어에 반드시 '최대 가동 시간(예: 8시간)' 타이머를 구현하여 네트워크 오류 시에도 자동으로 꺼지도록 설정.
- **기존 센서 유지:** 온도 센서 및 과열 방지(Thermal Fuse) 소자를 건드리지 말 것.
- **Fail-safe:** ESP32 고장 시에도 수동 조작이 가능하도록 설계.

## 5. 참고 프로젝트 및 기술 키워드
- **GitHub:** `smart-electric-blanket`, `ESPHome button simulation`
- **Community:** Home Assistant (ESPHome), 아두이노 스토리(Naver Cafe)
- **키워드:** Optocoupler button trigger, ESP32 web server, AC Phase Control (DIY 주의)
