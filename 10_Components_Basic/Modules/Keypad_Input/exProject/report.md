# 키패드 잠금장치 프로젝트 분석 보고서

## 프로젝트 개요

이 프로젝트는 4x4 키패드를 사용한 디지털 도어락 시스템 개발을 목표로 하며, 9단계에 걸쳐 점진적으로 기능을 구현하고 코드 품질을 개선해나가는 과정을 보여줍니다.

### 핵심 기능
- 4x4 키패드를 통한 5자리 비밀번호("12345") 입력
- 올바른 비밀번호 입력 시 서보모터를 통한 잠금 해제 (0° → 180°)
- 잘못된 비밀번호 입력 시 부저를 통한 경고음
- 5초 후 자동 잠금 복귀
- 'A' 키를 통한 수동 잠금 해제

## 단계별 구현 진도

### 1단계 - 키패드 기본 테스트 (`01_키패드잠금장치_시작코드.ino`)
- **구현 상태**: ✅ 완료
- **기능**: 
  - Adafruit_Keypad 라이브러리를 사용한 키패드 초기화
  - 키 입력 감지 및 시리얼 출력
  - 기본적인 키패드 이벤트 처리
- **주요 코드**: 키패드 객체 생성, 기본 입력 처리 루프

### 2단계 - 암호 검증 로직 (`02_암호테스트.ino`)
- **구현 상태**: ✅ 완료
- **기능**:
  - 5자리 비밀번호("12345") 설정
  - 숫자 키 입력만 암호에 추가
  - 암호 길이 확인 후 검증 실행
  - `handleKeyPress()` 및 `checkPassword()` 함수 분리
- **개선점**: 코딩 규칙 적용 (상수 대문자화, 배열 크기 상수화)

### 3단계 - 서보모터 통합 (`03_서보모터추가.ino`)
- **구현 상태**: ✅ 완료
- **기능**:
  - Servo 라이브러리 추가
  - 올바른 암호 입력 시 서보모터 180° 회전
  - 서보모터 초기 위치(0°) 설정
  - 핀 10번을 서보모터 제어용으로 사용
- **시뮬레이터**: Wokwi 링크 제공 (3차 버전)

### 4단계 - 수동 복귀 기능 (`04_수동복귀.ino`)
- **구현 상태**: ✅ 완료
- **기능**:
  - 'A' 키 입력 시 서보모터 수동 복귀 기능
  - `resetServo()` 함수 추가
  - 키 종류에 따른 분기 처리 로직
- **시뮬레이터**: Wokwi 링크 제공 (4차 버전)

### 5단계 - 상용 절차 구현 (`05_상용절차따라.ino`)
- **구현 상태**: ✅ 완료
- **기능**:
  - 부저 추가 (핀 11번)
  - 잘못된 암호 입력 시 경고음 (1000Hz, 1초)
  - 올바른 암호 입력 시 5초 후 자동 잠금
  - 실제 상용 제품과 유사한 동작 로직
- **시뮬레이터**: Wokwi 링크 제공 (5차 버전)

### 6단계 - 매직 넘버 제거 (`06_매직넘버제거.ino`)
- **구현 상태**: ✅ 완료
- **개선 사항**:
  - 부저 관련 상수 정의 (`BUZZER_FREQUENCY`, `BUZZER_DURATION`)
  - 서보모터 관련 상수 정의 (`SERVO_PIN`, `SERVO_OPEN_ANGLE`, `SERVO_CLOSE_ANGLE`)
  - 자동 잠금 시간 상수화 (`AUTO_LOCK_DELAY`)
  - 코드 가독성 및 유지보수성 향상
- **시뮬레이터**: Wokwi 링크 제공 (6차 버전)

### 7단계 - 완성 코드 (`07_완성코드.ino`)
- **구현 상태**: ✅ 완료
- **주요 개선**:
  - `delay()` 함수 사용 문제 해결 → `millis()` 기반 비동기 처리
  - 타이머 변수 및 상태 변수 추가 (`previousMillis`, `servoOpen`)
  - 시스템 반응성 크게 향상
  - 키패드 입력을 차단하지 않는 자동 잠금 구현
- **시뮬레이터**: Wokwi 링크 제공 (7차 버전)

### 8단계 - 중복 코드 리팩토링 (`08_중복코드.ino`)
- **구현 상태**: ✅ 완료
- **리팩토링 내용**:
  - 서보모터 개방 로직 공통화 → `openServo()` 함수 추가
  - 중복되는 서보모터 제어 코드 제거
  - 코드 재사용성 및 유지보수성 향상
  - 함수 매개변수를 통한 메시지 커스터마이징
- **시뮬레이터**: Wokwi 링크 제공 (8차 버전)

### 9단계 - 문서화 완료 (`09_doxygen.ino`)
- **구현 상태**: ✅ 완료
- **문서화 내용**:
  - 모든 함수, 변수, 상수에 Doxygen 주석 추가
  - `@brief`, `@param` 태그를 사용한 상세 설명
  - 코드 전문성 및 가독성 최대화
  - 자동 문서 생성 지원

## 기술적 특징 및 우수 사례

### 1. 점진적 개발 방법론
- 각 단계별로 하나씩 기능을 추가하며 안정적 개발
- 각 단계마다 Wokwi 시뮬레이터 링크 제공으로 검증 가능
- 기능 단위별 테스트 및 검증 과정

### 2. 코드 품질 개선 과정
- **5단계**: 기본 기능 완성
- **6단계**: 매직 넘버 제거로 유지보수성 향상
- **7단계**: `delay()` → `millis()` 전환으로 성능 향상
- **8단계**: 중복 코드 제거로 재사용성 향상
- **9단계**: 전문적 문서화 완료

### 3. 아두이노 모범 사례 적용
- 상수는 대문자와 언더스코어 사용
- 매직 넘버 사용 금지
- 하드코딩 최소화
- 연관성 있는 코드끼리 그룹화
- 비동기 처리를 통한 시스템 응답성 확보

## 구현된 하드웨어 구성

### 입력 장치
- **4x4 키패드**: 핀 2-9번 사용 (행: 6-9번, 열: 2-5번)
- **키 매핑**: 숫자(0-9), 특수문자(A, B, C, D, *, #)

### 출력 장치
- **서보모터**: 핀 10번, 0°(잠금) ↔ 180°(해제)
- **부저**: 핀 11번, 1000Hz 경고음

### 라이브러리
- `Adafruit_Keypad.h`: 키패드 제어
- `Servo.h`: 서보모터 제어

## 보안 및 실용성

### 현재 보안 수준
- 5자리 고정 비밀번호 ("12345")
- 잘못된 입력 시 즉시 피드백
- 자동 잠금 기능 (5초)

### 실제 적용 가능성
- 기본적인 도어락 시스템으로 충분히 활용 가능
- 상용 제품과 유사한 동작 로직 구현
- 안정적인 비동기 처리로 실용성 확보

## 프로젝트 완성도 평가

**전체 완성도: 95% (매우 우수)**

### 완성된 항목 ✅
- [x] 키패드 입력 처리
- [x] 비밀번호 검증 로직
- [x] 서보모터 제어
- [x] 부저 경고음
- [x] 자동 잠금 기능
- [x] 수동 잠금 해제
- [x] 비동기 처리 구현
- [x] 코드 리팩토링
- [x] 전문적 문서화
- [x] 시뮬레이터 검증

### 추가 개선 가능 항목
- [ ] 비밀번호 변경 기능
- [ ] 다중 사용자 지원
- [ ] 잘못된 입력 횟수 제한
- [ ] EEPROM을 통한 설정 저장
- [ ] LCD 디스플레이 추가

## 학습 가치 및 의의

이 프로젝트는 단순한 아두이노 예제를 넘어서, 실제 제품 개발 과정에서 중요한 여러 원칙들을 체계적으로 학습할 수 있는 우수한 사례입니다:

1. **점진적 개발**: 작은 단위로 나누어 안정적으로 개발
2. **코드 품질**: 리팩토링과 최적화의 중요성
3. **비동기 프로그래밍**: 아두이노에서의 멀티태스킹 개념
4. **문서화**: 전문적인 코드 관리와 유지보수

전반적으로 매우 체계적이고 교육적 가치가 높은 프로젝트로 평가됩니다.