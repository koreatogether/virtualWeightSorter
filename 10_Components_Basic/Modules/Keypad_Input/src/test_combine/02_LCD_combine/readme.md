# LCD 통합 키패드 잠금 시스템

## 개요
4x4 키패드, 서보모터, I2C LCD(hd44780), 부저, 수동버튼을 통합한 보안 잠금 시스템입니다.

## 주요 기능

### 하드웨어 구성
- **키패드**: 4x4 매트릭스 (Adafruit_Keypad 라이브러리)
- **서보모터**: 잠금/해제 메커니즘 (0도=잠금, 180도=해제)  
- **LCD**: 16x2 I2C 디스플레이 (hd44780 라이브러리)
- **부저**: 경고음 출력
- **수동버튼**: 비상 해제 버튼

### 시스템 모드
1. **IDLE**: 대기 상태, 비밀번호 입력 대기
2. **SECURITY_LOCKDOWN**: 보안 락다운 (최대 시도 초과 시)

### 비밀번호 시스템
- **기본 비밀번호**: "123456"
- **입력 형식**: `*123456#` 또는 `*123456*`
- **최대 시도**: 5회 실패 시 2분간 락다운
- **입력 타임아웃**: 10초

### LCD 백라이트 관리
- **기본**: 10초 후 자동 꺼짐
- **자동 켜짐 상황**:
  - 메시지 표시 시마다
  - 비밀번호 입력 중 (계속 유지)
  - 락다운/언락 상태 (계속 유지)
  - 수동버튼 사용 시 (10초간)

### 상태별 LCD 표시
- **대기**: "Security Lock / Ready"
- **비밀번호 입력**: "Password Entry / Enter: ***"
- **성공**: "Access Granted / Door Unlocked"
- **실패**: "Wrong Password / Attempts: X/5"
- **락다운**: "Security Lockdown / LOCKED XXs"
- **언락**: "Access Granted / UNLOCKED Xs"
- **수동해제**: "Manual Unlock / Activated"

### 타이밍 시스템
- **언락 지속**: 5초 후 자동 잠금
- **락다운 지속**: 2분 (120초)
- **부저 지속**: 1분 (락다운 시 1초 간격 비프음)
- **디바운스**: 200ms (키패드/버튼)

### 보안 기능
- 연속 실패 시 보안 락다운 활성화
- 락다운 중 수동버튼 비활성화
- 입력 타임아웃으로 무한 대기 방지
- 실시간 남은 시간 표시

### 핀 배치
```
키패드: 
- 행(ROWS): 9,8,7,6
- 열(COLS): 5,4,3,2

기타:
- 서보모터: 10번핀
- 수동버튼: 11번핀 (INPUT_PULLUP)
- 부저: 12번핀
- LCD: I2C (기본 주소)
```

### 주요 함수
- `handleIdleMode()`: 키패드 입력 처리
- `processPasswordInput()`: 비밀번호 검증
- `handleLockdownMode()`: 락다운 상태 관리
- `updateLcdDisplay()`: LCD 상태 업데이트
- `handleBacklight()`: 백라이트 자동 관리
- `handleManualUnlock()`: 수동 해제 처리

## 사용법
1. 전원 연결 후 "Ready" 메시지 확인
2. `*123456#` 형식으로 비밀번호 입력
3. 성공 시 5초간 문 열림, 자동 잠금
4. 실패 5회 시 2분간 시스템 잠금
5. 수동버튼으로 비상 해제 (락다운 시 제외)

## 특징
- 상태 기반 설계로 안정적 동작
- 실시간 피드백 (LCD + 부저)
- 지능적 백라이트 관리로 전력 절약
- 디바운스 처리로 오작동 방지
- 타임아웃 시스템으로 무한 대기 방지