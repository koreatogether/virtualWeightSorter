# ë©”ëª¨ë¦¬ ì•ˆì „ì„± ê°•í™” ê°œì„ ì‚¬í•­ ğŸ“‹

## ğŸ“… ì ìš© ë‚ ì§œ: 2025-01-27

## ğŸš¨ Level 1: Critical Safety Implementation

### 1.1 Utils.cpp - ë°°ì—´ ê²½ê³„ ê²€ì‚¬ ê°•í™” âœ…

**ë³€ê²½ ìœ„ì¹˜**: `addrToString()` í•¨ìˆ˜  
**ë¬¸ì œì **: `sprintf()` ì‚¬ìš©ìœ¼ë¡œ ì¸í•œ ë²„í¼ ì˜¤ë²„í”Œë¡œìš° ìœ„í—˜  
**í•´ê²°ë°©ë²•**: `snprintf()`ë¡œ êµì²´ ë° ê²½ê³„ ê²€ì‚¬ ì¶”ê°€

```cpp
// Before (ìœ„í—˜)
sprintf(&addrStr[idx], "%02X", deviceAddress[j]);

// After (ì•ˆì „)
int written = snprintf(&addrStr[idx], maxLen - idx, "%02X", deviceAddress[j]);
if (written < 0 || idx + written >= maxLen) {
    log_error(F("Address string buffer overflow"));
    addrStr[idx] = '\0';
    return;
}
```

**íš¨ê³¼**:
- ë²„í¼ ì˜¤ë²„í”Œë¡œìš° ì™„ì „ ì°¨ë‹¨
- ì˜¤ë¥˜ ë°œìƒ ì‹œ ë¡œê·¸ ì¶œë ¥ ë° ì•ˆì „í•œ ì¢…ë£Œ
- ìµœëŒ€ ê¸¸ì´ 24ë°”ì´íŠ¸ë¡œ ëª…ì‹œì  ì œí•œ

### 1.2 MemoryUsageTester.cpp - ë©”ëª¨ë¦¬ í• ë‹¹ ì‹¤íŒ¨ ì²˜ë¦¬ âœ…

**ë³€ê²½ ìœ„ì¹˜**: `testDynamicAllocation()`, `testObjectCreation()`, `runStressTest()`  
**ë¬¸ì œì **: malloc/new ì‹¤íŒ¨ ì‹œ ì²˜ë¦¬ ì—†ìŒ  
**í•´ê²°ë°©ë²•**: nullptr ì²´í¬ ë° ì‹¤íŒ¨ ì²˜ë¦¬ ë¡œì§ ì¶”ê°€

```cpp
// Before (ìœ„í—˜)
int *arr = (int *)malloc(sizeof(int) * 100);
printMemoryStatus("After malloc 100 ints");

// After (ì•ˆì „)
int *arr = (int *)malloc(sizeof(int) * 100);
if (arr == nullptr) {
    Serial.println(F("Critical: malloc failed for 100 ints"));
    return;
}
printMemoryStatus("After malloc 100 ints");
```

**íš¨ê³¼**:
- ë©”ëª¨ë¦¬ í• ë‹¹ ì‹¤íŒ¨ ì‹œ í¬ë˜ì‹œ ë°©ì§€
- ëª…í™•í•œ ì˜¤ë¥˜ ë©”ì‹œì§€ ì¶œë ¥
- ì•ˆì „í•œ í•¨ìˆ˜ ì¢…ë£Œ

### 1.3 ëŸ°íƒ€ì„ ë©”ëª¨ë¦¬ ëª¨ë‹ˆí„°ë§ ê°•í™” âœ…

**ë³€ê²½ ìœ„ì¹˜**: `runStressTest()` í•¨ìˆ˜  
**ë¬¸ì œì **: ë©”ëª¨ë¦¬ ë¶€ì¡± ìƒí™© ê°ì§€ ì—†ìŒ  
**í•´ê²°ë°©ë²•**: ì‹¤ì‹œê°„ ë©”ëª¨ë¦¬ ì²´í¬ ë° ì„ê³„ì  ê°ì§€

```cpp
// ë©”ëª¨ë¦¬ ì„ê³„ì  ì²´í¬ ì¶”ê°€
int freeRam = freeMemory();
if (freeRam < 2000) { // 2KB ì´í•˜ ì‹œ ê²½ê³ 
    Serial.print(F("Low memory warning at iteration "));
    Serial.print(i);
    Serial.print(F(": "));
    Serial.print(freeRam);
    Serial.println(F(" bytes"));
    
    if (freeRam < 1000) { // 1KB ì´í•˜ ì‹œ ì¤‘ë‹¨
        Serial.println(F("Critical memory level - stopping test"));
        break;
    }
}
```

**íš¨ê³¼**:
- ì‹¤ì‹œê°„ ë©”ëª¨ë¦¬ ìƒíƒœ ëª¨ë‹ˆí„°ë§
- 2KB ì´í•˜ ì‹œ ê²½ê³ , 1KB ì´í•˜ ì‹œ ì¤‘ë‹¨
- ì‹œìŠ¤í…œ í¬ë˜ì‹œ ì‚¬ì „ ë°©ì§€

## ğŸ“Š ì•ˆì „ì„± ê°œì„  ê²°ê³¼

### ë³´ì•ˆ ê°•í™” í•­ëª©
1. **ë²„í¼ ì˜¤ë²„í”Œë¡œìš°**: sprintf â†’ snprintf êµì²´ë¡œ ì™„ì „ ì°¨ë‹¨
2. **ë©”ëª¨ë¦¬ í• ë‹¹ ì‹¤íŒ¨**: nullptr ì²´í¬ë¡œ í¬ë˜ì‹œ ë°©ì§€
3. **ë©”ëª¨ë¦¬ ë¶€ì¡±**: ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ìœ¼ë¡œ ì‚¬ì „ ê°ì§€
4. **ì—ëŸ¬ ì²˜ë¦¬**: ëª…í™•í•œ ì˜¤ë¥˜ ë©”ì‹œì§€ ë° ë¡œê¹…

### ì½”ë“œ í’ˆì§ˆ í–¥ìƒ
1. **ë°©ì–´ì  í”„ë¡œê·¸ë˜ë°**: ëª¨ë“  ìœ„í—˜ ì§€ì ì— ì•ˆì „ì¥ì¹˜ êµ¬í˜„
2. **ì—ëŸ¬ ë³µêµ¬**: ì‹¤íŒ¨ ì‹œ ì•ˆì „í•œ ì¢…ë£Œ ë° ë³µêµ¬
3. **ëª¨ë‹ˆí„°ë§**: ëŸ°íƒ€ì„ ìƒíƒœ ì¶”ì  ê°€ëŠ¥
4. **ë¡œê¹…**: F() ë§¤í¬ë¡œë¡œ ë©”ëª¨ë¦¬ íš¨ìœ¨ì„± ìœ ì§€

## ğŸ”„ ë‹¤ìŒ ë‹¨ê³„ ê³„íš

### Week 1 ì™„ë£Œ í•­ëª© âœ…
- [x] sprintfë¥¼ snprintfë¡œ êµì²´
- [x] í¬ì¸í„° null ì²´í¬ ì¶”ê°€  
- [x] ë°°ì—´ ê²½ê³„ ê²€ì‚¬ ê°•í™”
- [x] ë©”ëª¨ë¦¬ í• ë‹¹ ì‹¤íŒ¨ ì²˜ë¦¬

### Week 2 ì˜ˆì • ì‘ì—…
- [ ] ì „ì²´ ì½”ë“œë² ì´ìŠ¤ ì•ˆì „ì„± ê²€í† 
- [ ] ì¶”ê°€ sprintf/strcpy ì°¾ì•„ì„œ êµì²´
- [ ] ë©”ëª¨ë¦¬ ì„ê³„ ìƒí™© ì•Œë¦¼ ì‹œìŠ¤í…œ êµ¬ì¶•
- [ ] ìŠ¤íƒ ê¹Šì´ ì œí•œ êµ¬í˜„

### Week 3 ì¥ê¸° ëª©í‘œ
- [ ] Graceful degradation ë¡œì§ êµ¬í˜„
- [ ] ë©”ëª¨ë¦¬ í”„ë¡œíŒŒì¼ë§ ë„êµ¬ ì¶”ê°€
- [ ] ìë™ ë³µêµ¬ ë©”ì»¤ë‹ˆì¦˜ êµ¬ì¶•
- [ ] ì¢…í•© ì•ˆì •ì„± í…ŒìŠ¤íŠ¸ ìˆ˜í–‰

## ğŸ¯ ê²°ë¡ 

ë©”ëª¨ë¦¬ ìµœì í™”ì—ì„œ ì•ˆì •ì„± ì¤‘ì‹¬ìœ¼ë¡œ ì„±ê³µì ìœ¼ë¡œ ì „í™˜í•˜ì˜€ìŠµë‹ˆë‹¤. í˜„ì¬ RAM ì‚¬ìš©ëŸ‰ 50.6%ëŠ” ì¶©ë¶„íˆ ì•ˆì „í•œ ìˆ˜ì¤€ì´ë©°, ë” ì¤‘ìš”í•œ ê²ƒì€ ì‹œìŠ¤í…œ í¬ë˜ì‹œë¥¼ ë°©ì§€í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. 

**í•µì‹¬ ì„±ê³¼**:
- ë²„í¼ ì˜¤ë²„í”Œë¡œìš° ìœ„í—˜ ì œê±°
- ë©”ëª¨ë¦¬ í• ë‹¹ ì‹¤íŒ¨ ì•ˆì „ ì²˜ë¦¬  
- ì‹¤ì‹œê°„ ë©”ëª¨ë¦¬ ëª¨ë‹ˆí„°ë§ êµ¬í˜„
- ë°©ì–´ì  í”„ë¡œê·¸ë˜ë° íŒ¨í„´ ì ìš©

ì´ì œ ì‹œìŠ¤í…œì´ í›¨ì”¬ ë” ê²¬ê³ í•˜ê³  ì‹ ë¢°í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ›¡ï¸
