# 센서 오류 처리 개선 버전 (v6.12) 유닛 테스트 체크리스트

## 테스트 환경 정보
- **날짜**: 2025-07-28
- **버전**: v6.12 (센서 오류 처리 개선)
- **컴파일 상태**: ✅ 성공 (75140 bytes, 28% program storage)
- **업로드 상태**: ✅ 성공 (COM4, 4.691초)

## 🎯 테스트 목표
1. **기존 기능 회귀 테스트**: 모든 기본 기능이 정상 동작하는지 확인
2. **메뉴 취소 기능 검증**: m → 5번 취소가 정상 동작하는지 확인
3. **센서 오류 처리 검증**: 새로 추가된 센서 재시도 로직 확인
4. **메모리 분석 통합**: 메모리 모니터링이 정상 동작하는지 확인

## 📋 사전 준비 체크리스트

### ✅ 컴파일 및 업로드 확인
- [ ] 컴파일 성공 확인: `arduino-cli compile --fqbn arduino:renesas_uno:unor4wifi . --output-dir ./build`
- [ ] 업로드 성공 확인: `arduino-cli upload --fqbn arduino:renesas_uno:unor4wifi --port COM4 --input-dir ./build`
- [ ] 시리얼 모니터 연결 확인 (9600 baud)

### ✅ 테스트 환경 준비
- [ ] Unity 테스트 프레임워크 설정 확인
- [ ] Mock 객체들 컴파일 확인
- [ ] TestRunnerSetup.cpp 정상 동작 확인
- [ ] 센서 연결/비연결 상태 테스트 준비

### ✅ 테스트 데이터 준비
- [ ] 기존 시나리오 1-10 테스트 케이스 확인
- [ ] 새로운 시나리오 11 테스트 케이스 준비
- [ ] 메뉴 취소 테스트 시나리오 준비

## 🔧 기능별 테스트 항목

### 1. 기본 센서 기능 (시나리오 1)
- [ ] 센서 테이블 정상 표시
- [ ] 온도 읽기 정상 동작
- [ ] 센서 ID 정상 표시

### 2. 메뉴 시스템 (시나리오 2 + 새로운 이슈)
- [ ] m 입력 시 메뉴 정상 표시
- [ ] **🚨 중요**: 5번 입력 시 취소 정상 동작
- [ ] 메뉴에서 일반 모드로 복귀 확인
- [ ] clearInputBuffer() 정상 동작 확인

### 3. ID 변경 기능 (시나리오 3-6)
- [ ] 개별 ID 변경 (시나리오 3)
- [ ] 선택적 ID 변경 (시나리오 4)
- [ ] 자동 ID 할당 (시나리오 5)
- [ ] 전체 ID 리셋 (시나리오 6)

### 4. 임계값 설정 (시나리오 9-10)
- [ ] 개별 센서 임계값 설정
- [ ] 전역 임계값 설정
- [ ] 임계값 메뉴에서 5번 취소 동작

### 5. 오류 처리 (시나리오 7-8)
- [ ] 잘못된 입력 처리
- [ ] 센서 오류 상황 처리

### 6. 새로운 센서 재시도 로직 (신규)
- [ ] 센서 감지 실패 시 재시도 동작
- [ ] 최대 5회 시도 제한
- [ ] 30초 타임아웃 동작
- [ ] no-sensor 모드 진입

### 7. 메모리 분석 통합 (신규)
- [ ] 메모리 모니터링 정상 동작
- [ ] CSV 로그 생성 확인
- [ ] 메모리 상태 리포팅

## 🚨 우선 해결할 이슈

### 메뉴 취소 기능 문제
**문제**: m → 5번을 눌러도 취소가 안되는 현상
**테스트 시나리오**: 
1. 정상 동작 모드에서 m 입력
2. 메뉴 표시 확인
3. 5번 입력
4. "Cancelled. Returning to normal operation." 메시지 확인
5. 일반 모드로 복귀 확인

## 📝 테스트 실행 순서

### Phase 1: 기본 기능 회귀 테스트
1. 시나리오 1-6 실행 (기존 기능)
2. 기본 동작 확인

### Phase 2: 메뉴 시스템 집중 테스트  
1. 시나리오 11 실행 (메뉴 취소 문제)
2. 메뉴 시스템 전체 검증

### Phase 3: 새로운 기능 테스트
1. 센서 오류 처리 테스트
2. 메모리 분석 통합 테스트

### Phase 4: 통합 테스트
1. 전체 시나리오 연속 실행
2. 시스템 안정성 확인

## 🎯 성공 기준
- [ ] 모든 기존 시나리오(1-10) 통과
- [ ] 시나리오 11 (메뉴 취소) 통과
- [ ] 센서 재시도 로직 정상 동작
- [ ] 메모리 모니터링 정상 동작
- [ ] 24시간 연속 동작 안정성 확인

## 📂 관련 파일
- `test/test_scenario*.cpp`: 기존 시나리오 테스트
- `test/test_scenario11.cpp`: 새로운 메뉴 취소 테스트
- `test/TestRunnerSetup.cpp`: 테스트 환경 설정
- `test/MockMemoryUsageTester.h`: 메모리 테스터 Mock
