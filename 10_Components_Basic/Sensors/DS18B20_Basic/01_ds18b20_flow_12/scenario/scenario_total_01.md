# 전체 회귀 테스트 시나리오 - Total Scenario 01

## 시나리오 개요
**목적**: 펌웨어 v6.12의 모든 핵심 기능을 순차적으로 검증하는 종합 회귀 테스트  
**대상**: Arduino UNO R4 WiFi DS18B20 온도 센서 시스템  
**소요 시간**: 약 15-20분  
**자동화 수준**: Unity 테스트 프레임워크를 통한 완전 자동화

---

## 테스트 시나리오 구성

### Phase 1: 시스템 초기화 및 기본 기능 검증 (5분)
1. **시스템 부팅 및 초기화**
2. **센서 테이블 표시 기능**
3. **기본 명령어 처리**
4. **메뉴 시스템 진입/취소**

### Phase 2: ID 관리 기능 전체 검증 (5분)
5. **개별 센서 ID 변경**
6. **선택적 다중 센서 ID 변경**
7. **자동 ID 할당**
8. **전체 ID 초기화**

### Phase 3: 고급 기능 및 에러 처리 (5분)
9. **임계값 설정 및 관리**
10. **센서 에러 처리 (v6.12 신규)**
11. **메뉴 취소 기능 강화 (v6.12 수정)**
12. **메모리 사용량 모니터링**

### Phase 4: 통합 테스트 및 안정성 검증 (5분)
13. **동시 작업 처리**
14. **에러 복구 메커니즘**
15. **장시간 동작 안정성**
16. **성능 기준 검증**

---

## 상세 테스트 케이스

### 🔧 Phase 1: 시스템 초기화 및 기본 기능 검증

#### TC01: 시스템 부팅 및 초기화
```
목적: 시스템이 정상적으로 부팅되고 초기화되는지 확인
단계:
1. Arduino 전원 투입
2. 시리얼 통신 초기화 (115200 baud)
3. DS18B20 센서 스캔 및 초기화
4. 초기 상태 메시지 출력 확인
예상 결과: "Serial communication initialized", 센서 개수 표시
```

#### TC02: 센서 테이블 표시 기능
```
목적: 센서 데이터 테이블이 정확하게 표시되는지 확인
단계:
1. 자동 센서 테이블 표시 대기
2. 센서 ID, 온도, 주소 정보 확인
3. 테이블 포맷 및 데이터 정확성 검증
4. 실시간 업데이트 확인 (10초마다)
예상 결과: 정확한 센서 정보 테이블 표시
```

#### TC03: 기본 명령어 처리
```
목적: 기본 명령어들이 올바르게 처리되는지 확인
단계:
1. 'help' 또는 'h' 명령어 입력
2. 도움말 메시지 출력 확인
3. 알 수 없는 명령어 입력
4. 적절한 에러 메시지 출력 확인
예상 결과: 명령어별 적절한 응답 출력
```

#### TC04: 메뉴 시스템 진입/취소
```
목적: 메뉴 진입과 취소가 정상적으로 작동하는지 확인
단계:
1. 'm' 또는 'menu' 명령어로 메뉴 진입
2. 메뉴 옵션 목록 표시 확인
3. '5' 또는 'cancel' 명령어로 취소
4. 정상 모드 복귀 확인
예상 결과: 메뉴 진입/취소 정상 동작
```

### 🔧 Phase 2: ID 관리 기능 전체 검증

#### TC05: 개별 센서 ID 변경
```
목적: 단일 센서의 ID를 성공적으로 변경할 수 있는지 확인
단계:
1. 메뉴 진입 → 옵션 1 선택
2. 변경할 센서 선택 (예: 1번 센서)
3. 새로운 ID 입력 (예: 10)
4. 변경 결과 확인 및 테이블 업데이트 확인
예상 결과: 선택된 센서의 ID가 성공적으로 변경됨
```

#### TC06: 선택적 다중 센서 ID 변경
```
목적: 여러 센서의 ID를 동시에 변경할 수 있는지 확인
단계:
1. 메뉴 진입 → 옵션 2 선택
2. 다중 센서 선택 (예: 1,3,5)
3. 각 센서의 새로운 ID 입력
4. 변경 결과 확인 및 검증
예상 결과: 선택된 모든 센서의 ID가 성공적으로 변경됨
```

#### TC07: 자동 ID 할당
```
목적: 모든 센서에 순차적 ID가 자동으로 할당되는지 확인
단계:
1. 메뉴 진입 → 옵션 3 선택
2. 자동 할당 확인 메시지 응답
3. 순차적 ID 할당 과정 관찰
4. 최종 결과 테이블 확인
예상 결과: 모든 센서가 1, 2, 3... 순서로 ID 할당됨
```

#### TC08: 전체 ID 초기화
```
목적: 모든 센서 ID를 0으로 초기화할 수 있는지 확인
단계:
1. 메뉴 진입 → 옵션 4 선택
2. 초기화 확인 메시지 응답
3. 전체 초기화 과정 관찰
4. 모든 센서 ID가 0으로 변경되었는지 확인
예상 결과: 모든 센서 ID가 0으로 초기화됨
```

### 🔧 Phase 3: 고급 기능 및 에러 처리

#### TC09: 임계값 설정 및 관리
```
목적: 온도 임계값 설정 기능이 정상적으로 작동하는지 확인
단계:
1. 임계값 메뉴 진입
2. 개별 센서 임계값 설정 (예: 25°C 상한, 5°C 하한)
3. 전역 임계값 설정
4. 임계값 초과 시 알림 확인
예상 결과: 임계값 설정 및 알림 기능 정상 동작
```

#### TC10: 센서 에러 처리 (v6.12 신규) ⭐
```
목적: 새로운 센서 에러 처리 메커니즘이 올바르게 작동하는지 확인
단계:
1. 센서 연결 해제 시뮬레이션
2. 5회 재시도 메커니즘 확인
3. 30초 타임아웃 처리 확인
4. No-sensor 모드 전환 확인
예상 결과: 무한 루프 없이 graceful 에러 처리
```

#### TC11: 메뉴 취소 기능 강화 (v6.12 수정) ⭐
```
목적: 메뉴 취소 기능이 모든 상황에서 올바르게 작동하는지 확인
단계:
1. 메인 메뉴에서 m→5 취소 테스트
2. 임계값 메뉴에서 취소 테스트
3. 연속적인 취소 작업 테스트
4. 입력 버퍼 정리 확인
예상 결과: 모든 메뉴 상황에서 취소 기능 정상 동작
```

#### TC12: 메모리 사용량 모니터링
```
목적: 메모리 사용량 모니터링 기능이 정확하게 작동하는지 확인
단계:
1. 실시간 메모리 사용량 표시 확인
2. CSV 로그 파일 생성 확인
3. 메모리 부족 경고 기능 확인
4. 메모리 누수 검사
예상 결과: 정확한 메모리 모니터링 및 로깅
```

### 🔧 Phase 4: 통합 테스트 및 안정성 검증

#### TC13: 동시 작업 처리
```
목적: 여러 작업이 동시에 진행될 때 시스템 안정성 확인
단계:
1. 센서 데이터 읽기 + 메뉴 조작 동시 수행
2. ID 변경 중 센서 에러 발생 시나리오
3. 메모리 모니터링 + 임계값 확인 동시 수행
4. 다중 센서 작업 안정성 확인
예상 결과: 모든 동시 작업이 안정적으로 처리됨
```

#### TC14: 에러 복구 메커니즘
```
목적: 다양한 에러 상황에서 시스템이 정상적으로 복구되는지 확인
단계:
1. 센서 연결 해제 후 재연결 테스트
2. 시리얼 통신 오류 복구 테스트
3. 메뉴 상태 오류 복구 테스트
4. 메모리 오류 복구 테스트
예상 결과: 모든 에러 상황에서 자동 복구
```

#### TC15: 장시간 동작 안정성
```
목적: 시스템이 장시간 동작 시에도 안정적인지 확인
단계:
1. 30분 연속 동작 테스트 시작
2. 주기적인 기능 검증 (10분마다)
3. 메모리 누수 모니터링
4. 성능 저하 확인
예상 결과: 30분 동안 안정적인 동작 유지
```

#### TC16: 성능 기준 검증
```
목적: 시스템이 정의된 성능 기준을 만족하는지 확인
단계:
1. 메뉴 응답 시간 측정 (< 100ms)
2. 센서 데이터 읽기 시간 측정 (< 1초)
3. ID 변경 작업 시간 측정 (< 2초)
4. 메모리 사용량 확인 (Flash < 30%, SRAM < 70%)
예상 결과: 모든 성능 기준 만족
```

---

## 테스트 실행 자동화

### Unity 테스트 케이스 구성
- **총 16개 테스트 케이스**
- **4개 Phase별 그룹화**
- **각 Phase별 성공/실패 판정**
- **전체 시나리오 통합 결과**

### 테스트 실행 명령어
```bash
# 전체 시나리오 실행
.\run_test.bat scenario_total_01

# Phase별 개별 실행 (구현 예정)
.\run_test.bat total_phase1
.\run_test.bat total_phase2
.\run_test.bat total_phase3
.\run_test.bat total_phase4
```

---

## 성공/실패 기준

### ✅ 성공 기준
- **모든 16개 테스트 케이스 PASS**
- **0 Failures, 0 Ignored**
- **모든 성능 기준 만족**
- **메모리 누수 없음**

### ❌ 실패 기준
- **단일 테스트 케이스라도 FAIL**
- **성능 기준 미달**
- **메모리 누수 발견**
- **안정성 문제 발생**

---

## 테스트 결과 보고

### 자동 생성 보고서
- **test_result_scenario_total_01.txt**: 텍스트 결과
- **unity_test_output.xml**: XML 형식 결과
- **memory_usage_report.csv**: 메모리 사용량 로그
- **performance_metrics.txt**: 성능 측정 결과

### 수동 검증 항목
- **사용자 인터페이스 품질**
- **메시지 출력 정확성**
- **에러 메시지 명확성**
- **전반적인 사용자 경험**

---

**시나리오 작성일**: 2025년 7월 28일  
**대상 펌웨어**: v6.12  
**예상 실행 시간**: 15-20분  
**자동화 수준**: 95% (일부 하드웨어 의존적 테스트 제외)
