# ğŸ” PMS7003 + Arduino + Sleep/Active/Passive ëª¨ë“œ GitHub í”„ë¡œì íŠ¸ ì¡°ì‚¬

> **ì¡°ì‚¬ì¼**: 2025ë…„ 11ì›” 25ì¼  
> **ì¡°ì‚¬ ëª©ì **: PMS7003 ë¨¼ì§€ì„¼ì„œì™€ ì•„ë‘ì´ë…¸ë¥¼ ê²°í•©í•˜ì—¬ Active/Passive/Sleep ëª¨ë“œë¥¼ êµ¬í˜„í•œ ì˜¤í”ˆì†ŒìŠ¤ í”„ë¡œì íŠ¸ íƒìƒ‰  
> **ì •ë ¬ ê¸°ì¤€**: GitHub ë³„í‘œ(Stars) ìˆœ

---

## ğŸ“Š ì¡°ì‚¬ ê²°ê³¼ ìš”ì•½

| ìˆœìœ„  | ë¦¬í¬ì§€í† ë¦¬                     | â­ Stars | ì£¼ìš” íŠ¹ì§•                                 |
| :---: | ------------------------------ | :-----: | ----------------------------------------- |
|   ğŸ¥‡   | fu-hsi/PMS                     |   153   | Active/Passive/Sleep ì™„ë²½ ì§€ì› ë¼ì´ë¸ŒëŸ¬ë¦¬ |
|   ğŸ¥ˆ   | hackerspace-silesia/Smogomierz |   127   | ESP32/ESP8266 ì™„ì„±í˜• ê³µê¸°ì§ˆ ì¸¡ì •ê¸°        |
|   ğŸ¥‰   | jbanaszczyk/pms5003            |   93    | PMS5003/7003 í˜¸í™˜ ë¼ì´ë¸ŒëŸ¬ë¦¬              |
|   4   | openairproject/sensor-esp32    |   93    | ESP32 ê¸°ë°˜ ê³µê¸°ì§ˆ ì„¼ì„œ í”Œë«í¼             |
|   5   | avaldebe/PMserial              |   58    | ë‹¤ì–‘í•œ MCU ì§€ì› PM ì„¼ì„œ ë¼ì´ë¸ŒëŸ¬ë¦¬        |

---

## ğŸ¥‡ 1ìœ„: fu-hsi/PMS (â­ 153)

### ê¸°ë³¸ ì •ë³´
| í•­ëª©              | ë‚´ìš©                          |
| ----------------- | ----------------------------- |
| **URL**           | https://github.com/fu-hsi/PMS |
| **ì–¸ì–´**          | C++                           |
| **ë¼ì´ì„ ìŠ¤**      | MIT                           |
| **ìµœì¢… ì—…ë°ì´íŠ¸** | 2025ë…„ 11ì›”                   |
| **í¬í¬ ìˆ˜**       | 59                            |

### í•µì‹¬ ê¸°ëŠ¥
```
âœ… Active ëª¨ë“œ: ìë™ ë°ì´í„° ì „ì†¡ (2.3ì´ˆ ê°„ê²©)
âœ… Passive ëª¨ë“œ: ìš”ì²­ ì‹œì—ë§Œ ë°ì´í„° ì „ì†¡
âœ… Sleep ëª¨ë“œ: ì ˆì „ ëª¨ë“œ ì§„ì…/í•´ì œ
âœ… Wakeup ê¸°ëŠ¥: ìŠ¬ë¦½ì—ì„œ ê¹¨ìš°ê¸°
âœ… Non-blocking ë°©ì‹: ë¹„ì°¨ë‹¨ í•¨ìˆ˜
âœ… ì§€ì› ì„¼ì„œ: PMS 1003, 3003, 5003, 6003, 7003
```

### ì£¼ìš” API ì˜ˆì‹œ
```cpp
#include "PMS.h"
PMS pms(Serial);
PMS::DATA data;

// ëª¨ë“œ ì„¤ì •
pms.passiveMode();  // Passive ëª¨ë“œ
pms.activeMode();   // Active ëª¨ë“œ
pms.sleep();        // Sleep ëª¨ë“œ
pms.wakeUp();       // Wake up

// ë°ì´í„° ì½ê¸°
pms.read(data);        // Active ëª¨ë“œìš©
pms.requestRead();     // Passive ëª¨ë“œ - ìš”ì²­
pms.readUntil(data);   // Passive ëª¨ë“œ - ì‘ë‹µ ëŒ€ê¸°

// ë°ì´í„° ì ‘ê·¼
data.PM_AE_UG_1_0   // PM1.0 (Î¼g/mÂ³)
data.PM_AE_UG_2_5   // PM2.5 (Î¼g/mÂ³)
data.PM_AE_UG_10_0  // PM10 (Î¼g/mÂ³)
```

### Sleep/Wake ì˜ˆì œ ì½”ë“œ íŒ¨í„´
```cpp
void loop() {
  pms.wakeUp();           // ê¹¨ìš°ê¸°
  delay(30000);           // 30ì´ˆ ì•ˆì •í™” ëŒ€ê¸°
  pms.requestRead();      // ì½ê¸° ìš”ì²­
  pms.readUntil(data);    // ë°ì´í„° ì½ê¸°
  pms.sleep();            // ë‹¤ì‹œ ì ìê¸°
  delay(60000);           // 60ì´ˆ ëŒ€ê¸°
}
```

### ë””ìŠ¤í”Œë ˆì´ ì—°ë™
- âŒ TFT LCD ì˜ˆì œ ì—†ìŒ
- âŒ OLED ì˜ˆì œ ì—†ìŒ
- ì‹œë¦¬ì–¼ ì¶œë ¥ ì „ìš©

### ì°¸ê³ í•˜ê¸° ì¢‹ì€ ì 
> **Active/Passive/Sleep ëª¨ë“œì˜ ê°€ì¥ ëª…í™•í•˜ê³  ê¹”ë”í•œ êµ¬í˜„**  
> í˜„ì¬ í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš© ì¤‘ì¸ íŒ¨í„´ê³¼ ë§¤ìš° ìœ ì‚¬í•¨

---

## ğŸ¥ˆ 2ìœ„: hackerspace-silesia/Smogomierz (â­ 127)

### ê¸°ë³¸ ì •ë³´
| í•­ëª©              | ë‚´ìš©                                              |
| ----------------- | ------------------------------------------------- |
| **URL**           | https://github.com/hackerspace-silesia/Smogomierz |
| **í”„ë¡œì íŠ¸ëª…**    | Smogly (êµ¬ Smogomierz)                            |
| **ì–¸ì–´**          | C++ (Arduino)                                     |
| **ë¼ì´ì„ ìŠ¤**      | GPL-3.0                                           |
| **ìµœì¢… ì—…ë°ì´íŠ¸** | 2025ë…„ 2ì›”                                        |
| **í¬í¬ ìˆ˜**       | 40                                                |

### í•µì‹¬ ê¸°ëŠ¥
```
âœ… ESP8266/ESP32 ì§€ì›
âœ… ë‹¤ì–‘í•œ PM ì„¼ì„œ: PMS7003, SDS011, HPMA115S0, SPS30
âœ… í™˜ê²½ ì„¼ì„œ: BME280, DHT22, HTU21D, SHT1x
âœ… ì›¹ ì¸í„°í˜ì´ìŠ¤ (ì„¤ì •/ëª¨ë‹ˆí„°ë§)
âœ… í´ë¼ìš°ë“œ ì—°ë™: ThingSpeak, InfluxDB, MQTT
âœ… OTA ì—…ë°ì´íŠ¸
âœ… ë‹¤êµ­ì–´ ì§€ì› (í´ë€ë“œì–´/ì˜ì–´)
```

### ì§€ì› ì„¼ì„œ ëª©ë¡
| PM ì„¼ì„œ   | í™˜ê²½ ì„¼ì„œ |
| --------- | --------- |
| PMS7003   | BME280    |
| SDS011    | DHT22     |
| HPMA115S0 | HTU21D    |
| SPS30     | SHT1x     |

### Sleep ëª¨ë“œ êµ¬í˜„
```cpp
// Smogomierz.ino ì—ì„œ ë°œì·Œ
void dustSensorSleep() {
  if (config.DUST_MODEL == 1) { // PMS7003
    pms.sleep();  // Sleep ëª…ë ¹ ì „ì†¡
  }
}

void dustSensorWakeUp() {
  if (config.DUST_MODEL == 1) { // PMS7003
    pms.wakeUp();
    delay(30000); // 30ì´ˆ ì•ˆì •í™”
  }
}
```

### ë””ìŠ¤í”Œë ˆì´ ì—°ë™
- âŒ TFT LCD ì—†ìŒ
- âŒ OLED ì—†ìŒ (ì§ì ‘ ì—°ê²°)
- âœ… ì›¹ UIë¡œ ë°ì´í„° ì‹œê°í™”

### ì°¸ê³ í•˜ê¸° ì¢‹ì€ ì 
> **ì‹¤ì œ ì™„ì„±ëœ ê³µê¸°ì§ˆ ì¸¡ì •ê¸° í”„ë¡œì íŠ¸**  
> ì›¹ ì„¤ì •, í´ë¼ìš°ë“œ ì—°ë™, ë‹¤ì¤‘ ì„¼ì„œ ì§€ì› ë“± ì‹¤ìš©ì ì¸ ê¸°ëŠ¥ ì°¸ê³  ê°€ëŠ¥

---

## ğŸ¥‰ 3ìœ„: jbanaszczyk/pms5003 (â­ 93)

### ê¸°ë³¸ ì •ë³´
| í•­ëª©              | ë‚´ìš©                                   |
| ----------------- | -------------------------------------- |
| **URL**           | https://github.com/jbanaszczyk/pms5003 |
| **ì–¸ì–´**          | C++                                    |
| **ë¼ì´ì„ ìŠ¤**      | MIT                                    |
| **ìµœì¢… ì—…ë°ì´íŠ¸** | 2025ë…„ 11ì›”                            |
| **í¬í¬ ìˆ˜**       | 33                                     |

### í•µì‹¬ ê¸°ëŠ¥
```
âœ… PMS5003 / PMS7003 í˜¸í™˜
âœ… Active ëª¨ë“œ
âœ… Passive ëª¨ë“œ
âœ… Sleep/Wakeup ì§€ì›
âœ… SoftwareSerial ì§€ì›
âœ… Hardware Serial ì§€ì›
```

### íŠ¹ì§•ì ì¸ êµ¬í˜„
```cpp
// ëª…ì‹œì ì¸ ëª¨ë“œ ì—´ê±°í˜•
enum class PmsCmd {
    Read,       // Passive ëª¨ë“œ ì½ê¸°
    ModePassive,// Passive ëª¨ë“œ ì „í™˜
    ModeActive, // Active ëª¨ë“œ ì „í™˜
    Sleep,      // Sleep ëª¨ë“œ
    Wakeup      // Wake up
};
```

### ë””ìŠ¤í”Œë ˆì´ ì—°ë™
- âŒ TFT LCD ì˜ˆì œ ì—†ìŒ
- âŒ OLED ì˜ˆì œ ì—†ìŒ

### ì°¸ê³ í•˜ê¸° ì¢‹ì€ ì 
> **enum classë¥¼ ì‚¬ìš©í•œ ê¹”ë”í•œ ëª…ë ¹ì–´ ì •ì˜**  
> C++ ìŠ¤íƒ€ì¼ ì½”ë“œ êµ¬ì¡° ì°¸ê³ 

---

## 4ìœ„: openairproject/sensor-esp32 (â­ 93)

### ê¸°ë³¸ ì •ë³´
| í•­ëª©              | ë‚´ìš©                                           |
| ----------------- | ---------------------------------------------- |
| **URL**           | https://github.com/openairproject/sensor-esp32 |
| **ì–¸ì–´**          | C (ESP-IDF)                                    |
| **ë¼ì´ì„ ìŠ¤**      | GPL-3.0                                        |
| **ìµœì¢… ì—…ë°ì´íŠ¸** | 2025ë…„ 10ì›”                                    |
| **í¬í¬ ìˆ˜**       | 24                                             |

### í•µì‹¬ ê¸°ëŠ¥
```
âœ… ESP-IDF í”„ë ˆì„ì›Œí¬ ê¸°ë°˜ (FreeRTOS)
âœ… PMS3003/5003/7003 ì§€ì›
âœ… BMP280 í™˜ê²½ ì„¼ì„œ
âœ… ThingSpeak ì—°ë™
âœ… mDNS ì§€ì›
âœ… ì„¤ì • ì›¹ ì¸í„°í˜ì´ìŠ¤
```

### ì•„í‚¤í…ì²˜ íŠ¹ì§•
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          ESP-IDF Framework          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  PM Sensor  â”‚  Env Sensor â”‚   WiFi  â”‚
â”‚  PMS7003    â”‚   BMP280    â”‚  MQTT   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚            FreeRTOS Tasks           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ë””ìŠ¤í”Œë ˆì´ ì—°ë™
- âŒ TFT LCD ì—†ìŒ
- âŒ OLED ì—†ìŒ
- âœ… ì›¹ UI

### ì°¸ê³ í•˜ê¸° ì¢‹ì€ ì 
> **ESP-IDF + FreeRTOS ê¸°ë°˜ ì „ë¬¸ì ì¸ êµ¬ì¡°**  
> ë©€í‹°íƒœìŠ¤í‚¹ ì„¼ì„œ ì½ê¸° íŒ¨í„´ ì°¸ê³  ê°€ëŠ¥

---

## 5ìœ„: avaldebe/PMserial (â­ 58)

### ê¸°ë³¸ ì •ë³´
| í•­ëª©              | ë‚´ìš©                                 |
| ----------------- | ------------------------------------ |
| **URL**           | https://github.com/avaldebe/PMserial |
| **ì–¸ì–´**          | C++                                  |
| **ë¼ì´ì„ ìŠ¤**      | MIT                                  |
| **ìµœì¢… ì—…ë°ì´íŠ¸** | 2025ë…„ 11ì›”                          |
| **í¬í¬ ìˆ˜**       | 23                                   |

### í•µì‹¬ ê¸°ëŠ¥
```
âœ… ë‹¤ì–‘í•œ MCU ì§€ì›: Uno, Mega, Leonardo, ESP32, ESP8266, STM32F1
âœ… PMS3003/5003/7003/PMSA003 ì§€ì›
âœ… Active/Passive ëª¨ë“œ
âœ… Sleep/Wakeup ì§€ì›
âœ… PlatformIO ì§€ì›
```

### ì§€ì› ë³´ë“œ ëª©ë¡
| ë³´ë“œ         | Serial                 | ë¹„ê³             |
| ------------ | ---------------------- | --------------- |
| Arduino Uno  | SoftwareSerial         | í•€ ì œí•œ         |
| Arduino Mega | Serial1-3              | Hardware Serial |
| ESP8266      | SoftwareSerial/Serial1 | GPIO ì„ íƒ ê°€ëŠ¥  |
| ESP32        | HardwareSerial         | ëª¨ë“  í•€         |
| STM32F1      | Serial1-3              | Blue Pill ë“±    |

### ì˜ˆì œ ì½”ë“œ êµ¬ì¡°
```cpp
SerialPM pms(PMSx003, Serial1);

void setup() {
  pms.init();
}

void loop() {
  pms.read();
  if (pms) {
    Serial.println(pms.pm01);  // PM1.0
    Serial.println(pms.pm25);  // PM2.5
    Serial.println(pms.pm10);  // PM10
  }
}
```

### ë””ìŠ¤í”Œë ˆì´ ì—°ë™
- âŒ TFT LCD ì—†ìŒ
- âŒ OLED ì—†ìŒ (ì‹œë¦¬ì–¼ ì¶œë ¥)

### ì°¸ê³ í•˜ê¸° ì¢‹ì€ ì 
> **ë‹¤ì–‘í•œ MCU í˜¸í™˜ì„±**  
> Arduino Uno R4 WiFiì—ì„œ ì°¸ê³ í•  ë§Œí•œ Serial ì„¤ì •

---

## ğŸ“Œ ë³´ë„ˆìŠ¤: mcci-catena/MCCI-Catena-PMS7003

### ê¸°ë³¸ ì •ë³´
| í•­ëª©         | ë‚´ìš©                                               |
| ------------ | -------------------------------------------------- |
| **URL**      | https://github.com/mcci-catena/MCCI-Catena-PMS7003 |
| **ì–¸ì–´**     | C++                                                |
| **ë¼ì´ì„ ìŠ¤** | MIT                                                |
| **Stars**    | (ì ì§€ë§Œ ê³ í’ˆì§ˆ)                                    |

### íŠ¹ë³„íˆ ì£¼ëª©í•  ì 
```
âœ… FSM(ìœ í•œ ìƒíƒœ ë¨¸ì‹ ) ê¸°ë°˜ ì„¤ê³„
âœ… Active/Passive/Sleep ëª¨ë“œ ì™„ë²½ êµ¬í˜„
âœ… í´ë§ ê¸°ë°˜ ë¹„ì°¨ë‹¨ ë™ì‘
âœ… HAL(Hardware Abstraction Layer) ë¶„ë¦¬
âœ… LoRaWAN ì—°ë™ ì˜ˆì œ
âœ… AQI ê³„ì‚° JavaScript ì½”ë“œ í¬í•¨
```

### FSM ìƒíƒœë„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Power   â”‚
â”‚   OFF    â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚ wake()
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Warming  â”‚â”€â”€â”€â”€â–ºâ”‚  Normal  â”‚
â”‚   Up     â”‚     â”‚  Mode    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                      â”‚ passiveMode()
                      â–¼
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚ Passive  â”‚
                 â”‚  Mode    â”‚
                 â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                      â”‚ sleep()
                      â–¼
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚  Sleep   â”‚
                 â”‚  Mode    â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì°¸ê³ í•˜ê¸° ì¢‹ì€ ì 
> **ì „ë¬¸ì ì¸ FSM ê¸°ë°˜ ì„¤ê³„**  
> í˜„ì¬ í”„ë¡œì íŠ¸ì˜ ìƒíƒœ ê´€ë¦¬ ê°œì„ ì— ì°¸ê³  ê°€ëŠ¥

---

## ğŸ¯ í˜„ì¬ í”„ë¡œì íŠ¸ì— ì ìš© ê°€ëŠ¥í•œ ì¸ì‚¬ì´íŠ¸

### 1. ëª¨ë“œ ì „í™˜ íŒ¨í„´ (fu-hsi/PMS ì°¸ê³ )
```cpp
// ê¶Œì¥ íŒ¨í„´
pms.wakeUp();
delay(30000);        // íŒ¬ ì•ˆì •í™” í•„ìˆ˜!
pms.passiveMode();
pms.requestRead();
pms.readUntil(data);
pms.sleep();
```

### 2. FSM ê¸°ë°˜ ìƒíƒœ ê´€ë¦¬ (MCCI-Catena ì°¸ê³ )
```cpp
enum class SensorState {
    Off,
    WarmingUp,
    Active,
    Passive,
    Sleeping
};
```

### 3. ë¹„ì°¨ë‹¨ ì½ê¸° (avaldebe/PMserial ì°¸ê³ )
```cpp
// Non-blocking read
if (pms.available()) {
    pms.read();
}
// ë‹¤ë¥¸ ì‘ì—… ìˆ˜í–‰ ê°€ëŠ¥
```

---

## ğŸ“ ê²°ë¡ 

| ëª©ì                      | ì¶”ì²œ í”„ë¡œì íŠ¸               |
| ------------------------ | --------------------------- |
| **ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©**      | fu-hsi/PMS (ê°€ì¥ ê¹”ë”)      |
| **ì™„ì„±í˜• í”„ë¡œì íŠ¸ ì°¸ê³ ** | Smogomierz (ì‹¤ìš©ì )         |
| **FSM ì„¤ê³„ ì°¸ê³ **        | MCCI-Catena-PMS7003         |
| **ë©€í‹° MCU ì§€ì›**        | avaldebe/PMserial           |
| **ESP32 ì „ë¬¸**           | openairproject/sensor-esp32 |

---

## âš ï¸ ì£¼ì˜ì‚¬í•­

1. **TFT LCD GUI í”„ë¡œì íŠ¸ëŠ” ê±°ì˜ ì—†ìŒ**
   - ëŒ€ë¶€ë¶„ ì‹œë¦¬ì–¼ ì¶œë ¥ ë˜ëŠ” ì›¹ UI ì‚¬ìš©
   - TFT LCD + PMS7003 ì¡°í•©ì€ ì§ì ‘ êµ¬í˜„ í•„ìš”

2. **Sleep ëª¨ë“œ ì•ˆì •í™” ì‹œê°„**
   - ëª¨ë“  í”„ë¡œì íŠ¸ì—ì„œ 30ì´ˆ ëŒ€ê¸° ê¶Œì¥
   - íŒ¬ íšŒì „ ì•ˆì •í™” í•„ìˆ˜

3. **ë¼ì´ì„ ìŠ¤ í™•ì¸**
   - MIT: ìƒì—…ì  ì‚¬ìš© ê°€ëŠ¥
   - GPL-3.0: ì†ŒìŠ¤ ê³µê°œ ì˜ë¬´

---

> ğŸ“… ì‘ì„±: 2025-11-25  
> ğŸ”— ê´€ë ¨ íŒŒì¼: `sleepMode_tftLCDgraphic_rev04.ino`
