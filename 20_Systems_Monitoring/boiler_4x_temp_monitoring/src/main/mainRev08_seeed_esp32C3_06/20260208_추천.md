# 프로젝트 개선 및 기능 제안서 (2026-02-08)

본 문서는 `mainRev08_seeed_esp32C3_06` 기반의 보일러 모니터링 시스템을 분석하여, **안정성(Stability)**, **확장성(Scalability)**, **사용성(Usability)** 측면에서 추천하는 기능들을 정리한 것입니다.

---

## 1. ➕ ADD: 추가를 강력히 권장하는 기능 (Must-haves)

이 기능들은 시스템을 장기간 운용하거나 실제 현장에 설치했을 때 **유지보수와 안정성**을 위해 필수적입니다.

### 1.1 OTA (Over-The-Air) 무선 펌웨어 업데이트
*   **이유**: 보일러실에 설치된 장치를 PC와 USB로 연결하여 업데이트하는 것은 매우 번거롭습니다. WiFi를 통해 원격으로 코드를 수정하고 업로드할 수 있어야 합니다.
*   **구현**: `ArduinoOTA` 라이브러리 사용.
*   **난이도**: ⭐⭐

### 1.2 Watchdog Timer (WDT) - 자동 복구
*   **이유**: 24시간/365일 돌아가는 시스템은 언제든 예기치 못한 이유(전기적 노이즈, 메모리 누수 등)로 멈출(Hang) 수 있습니다. 멈춤 감지 시 자동으로 재부팅하는 안전장치가 필요합니다.
*   **구현**: ESP32 내장 `esp_task_wdt` 활용.
*   **난이도**: ⭐

### 1.3 설정값 저장 (Preferences/NVS)
*   **이유**: 현재는 알람 임계값이나 설정이 코드에 하드코딩되어 있거나 재부팅 시 초기화될 수 있습니다. Nextion 화면에서 설정한 온도값 등이 전원을 껐다 켜도 유지되어야 합니다.
*   **구현**: `Preferences.h` 라이브러리를 사용하여 Flash 메모리에 Key-Value 형태로 저장.
*   **난이도**: ⭐⭐

---

## 2. ➖ MINUS: 제거하거나 축소해야 할 부분 (Optimization)

현재 코드에서 **메모리 효율성**과 **보안**을 위해 개선(축소)이 필요한 부분입니다.

### 2.1 하드코딩된 WiFi 정보 (`wifiCredentials.h`) 제거
*   **이유**: 소스 코드에 비밀번호를 적어두는 것은 보안상 좋지 않으며, 공유기가 바뀔 때마다 코드를 수정하고 다시 업로드해야 하는 불편함이 있습니다.
*   **대안**: `WiFiManager` 라이브러리(Captive Portal)를 사용하여, 초기 접속 시 스마트폰으로 WiFi를 검색하고 비밀번호를 입력받아 저장하는 방식으로 변경하는 것을 추천합니다.

### 2.2 String 객체 사용 최소화
*   **이유**: 현재 `String` 객체를 많이 줄였으나, 여전히 일부 남아있을 수 있습니다. 장시간 구동 시 힙 메모리 파편화(Fragmentation)의 주범이 됩니다.
*   **대안**: 가능한 모든 문자열 처리를 C-style string (`char[]`, `snprintf`)으로 완전 전환하여 메모리 안정성을 극대화합니다.

---

## 3. 🎯 SELECT ONE: 이번에 도전해볼 만한 추천 기능

다음 중 **하나**를 골라 다음 리비전(Rev09)의 핵심 목표로 삼아보시는 것을 추천합니다.

### [선택지 A] 텔레그램(Telegram) 알람 봇 🤖 (추천)
*   **기능**: 특정 온도(예: 80도)를 넘거나, 센서 에러가 발생하면 사용자의 스마트폰 텔레그램으로 즉시 메시지를 전송합니다.
*   **장점**: 웹 대시보드를 계속 보고 있지 않아도 위험 상황을 즉시 인지할 수 있어 보일러 모니터링 시스템의 가치를 가장 높여주는 기능입니다.
*   **기술 스택**: `UniversalTelegramBot` 라이브러리.

### [선택지 B] MQTT & Home Assistant 연동 🏠
*   **기능**: 데이터를 자체 웹 서버뿐만 아니라 MQTT 브로커로 전송하여, Home Assistant 같은 스마트홈 플랫폼과 연동합니다.
*   **장점**: 애플/구글 홈 연동, 데이터베이스 축적(InfluxDB), 복잡한 자동화(예: 온도가 낮으면 스마트 플러그 켜기)가 가능해집니다.
*   **기술 스택**: `PubSubClient` 라이브러리.

### [선택지 C] Nextion 양방향 제어 강화 👆
*   **기능**: 현재는 '모니터링' 위주이지만, Nextion 화면에서 보일러의 운전 모드(외출/실내/온수)를 제어하거나 릴레이를 붙여 실제 하드웨어를 제어합니다.
*   **장점**: 단순 관제 시스템에서 **제어 시스템(HMI)**으로 업그레이드됩니다.

---

## 📝 종합 의견 (Copilot's Pick)

현재 시스템은 데이터 수집과 시각화(분석기) 측면에서 매우 완성도가 높습니다. 따라서 다음 단계로는 **"안전 및 알림"** 기능을 강화하는 것이 가장 의미가 큽니다.

👉 **추천 로드맵**: 
1. `Watchdog Timer`를 먼저 추가하여 안정성을 확보하고,
2. **[선택지 A] 텔레그램 봇**을 연동하여 "똑똑한 알림 시스템"을 완성해 보세요.
