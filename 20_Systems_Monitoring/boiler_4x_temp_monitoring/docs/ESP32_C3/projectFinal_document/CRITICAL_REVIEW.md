# Critical Technical Review (The Devil's Advocate)

본 문서는 `Boiler 4x Monitoring System (Rev08)`에 대해 냉소적이고 비평적인 시각에서 기술적 취약점, 잠재적 리스크, 그리고 아키텍처의 한계를 분석한 보고서입니다. 

**"코드가 돌아간다고 해서 시스템이 완성된 것은 아니다."**

---

## 1. Hardware Fragility (하드웨어의 취약성)

### 1.1 The "Brown-out" Time Bomb (전원 불안정)
*   **비평**: 현재 시스템은 Nextion 디스플레이와 ESP32의 WiFi 모듈이 동시에 피크 전력을 소모할 때를 대비한 **전원 버퍼 설계가 전무**하다. 단순히 "1A 어댑터 권장"이라는 문구만으로는 부족하다. USB 케이블의 저항만으로도 전압 강하가 발생해 ESP32가 무한 리부팅에 빠질 수 있다.
*   **리스크**: **High**. 보일러실 같은 환경은 전원 품질이 좋지 않다. 커패시터 보강 없는 현재 회로는 신뢰할 수 없다.

### 1.2 5V Logic Roulette (로직 레벨 호환성)
*   **비평**: Nextion(5V)과 ESP32(3.3V) 간의 통신에서 저항 분배(Voltage Divider)나 레벨 시프터 없이 직결하는 것은 **MCU 수명을 갉아먹는 도박**이다. "대부분 동작한다"는 엔지니어링이 아니다.
*   **리스크**: **Medium**. 장기적으로 GPIO 핀 번아웃(Burn-out) 가능성 존재.

### 1.3 Noise Susceptibility (노이즈 취약성)
*   **비평**: 긴 DS18B20 케이블은 그 자체로 안테나다. 보일러 점화 플러그나 펌프 모터가 돌 때 발생하는 EMI(전자기 간섭)에 대한 필터링 대책(Ferrite bead, RC Filter)이 코드와 회로 어디에도 없다.
*   **리스크**: **Medium**. 간헐적인 온도값 튀는 현상(85도, -127도) 발생 필연적.

---

## 2. Firmware Limitations (펌웨어의 한계)

### 2.1 Hardcoded Config Hell (하드코딩된 설정)
*   **비평**: WiFi SSID, 비밀번호, IP 주소, 대시보드 비밀번호가 소스 코드 헤더(`Config.h`, `wifiCredentials.h`)에 박제되어 있다. 공유기를 바꾸려면 컴파일러를 켜야 한다? 이는 유지보수 악몽이다.
*   **리스크**: **High**. 현장 대응력 제로. `WiFiManager` 등 런타임 설정 기능 부재는 치명적.

### 2.2 Lack of Robust Error Recovery (빈약한 에러 복구)
*   **비평**: `handleWiFi()`에서 재연결을 시도하지만, 만약 공유기가 멈추거나 DHCP 할당이 꼬이면 ESP32는 영원히 "연결 중..."만 외치며 센서 로직까지 지연될 수 있다. 엄격한 타임아웃과 **Watchdog Timer(WDT)**에 의한 강제 리셋 없이는 '무인 운영'이 불가능하다.
*   **리스크**: **High**. 시스템이 멈췄을 때 사람이 가서 껐다 켜야 함.

### 2.3 No OTA (원격 업데이트 부재)
*   **비평**: 보일러실은 춥거나 덥고, 접근하기 어렵다. 버그 패치를 위해 매번 노트북을 들고 가서 USB를 꽂아야 하는 구조는 원시적이다.
*   **리스크**: **Medium**. 유지보수 비용 증가.

---

## 3. Backend & Data Integrity (백엔드 및 데이터 무결성)

### 3.1 Python `http.server` is a Toy (장난감 서버)
*   **비평**: 현재 사용된 Python의 `http.server` 모듈은 프로덕션 용도가 아니다. 보안 기능이 전무하며, 동시 접속 처리에 매우 취약하다. 누군가 새로고침을 연타하면 서버는 뻗어버릴 것이다.
*   **리스크**: **Medium**. 서비스 거부(DoS) 공격에 취약, 동시성 처리 불가.

### 3.2 JSONL Concurrency Issue (동시성 문제)
*   **비평**: 데이터를 수집하는 스레드와 웹 요청을 처리하는 스레드가 하나의 `JSONL` 파일을 동시에 읽고 쓴다면? **Race Condition**으로 인한 파일 깨짐이나 읽기 오류가 발생할 수 있다. 파일 잠금(Locking) 메커니즘이 없다.
*   **리스크**: **Medium**. 드물지만 데이터 로그 파일 손상 가능성.

### 3.3 Data Downsampling = Data Loss (데이터 왜곡)
*   **비평**: 성능을 위해 1,000개로 데이터를 요약(Downsampling)하는 방식(Decimation)은 단순 건너뛰기다. 이 과정에서 **짧은 순간 튀었던 이상 온도(Spike)가 시각화에서 누락**될 수 있다. Min/Max/Avg를 모두 보여주는 방식이 아니라면, 이는 데이터 왜곡이다.
*   **리스크**: **Low**. 경향 파악엔 문제없으나 정밀 분석엔 부적합.

---

## 4. Security Theater (보안 코스프레)

### 4.1 Cleartext Traffic (평문 전송)
*   **비평**: 모든 통신(ESP32 <-> 서버 <-> 브라우저)이 HTTP 평문으로 전송된다. 네트워크 스니핑만으로도 비밀번호와 온도 데이터를 모두 볼 수 있다.
*   **리스크**: **Medium**. 로컬 네트워크라 당장은 괜찮지만, 포트포워딩으로 외부 개방 시 즉시 해킹 대상.

### 4.2 Weak Authentication (취약한 인증)
*   **비평**: `DASHBOARD_PASS = "1234"`와 쿠키 기반 인증은 보안이라 부르기 민망하다. 무차별 대입(Brute-force) 공격을 막을 방법이 없다.

---

## 5. Conclusion (종합 결론)

이 프로젝트는 **"기술적 개념 증명(PoC)"** 수준에서는 훌륭하지만, **"상용 제품(Product)"**이 되기엔 아직 갈 길이 멀다.

**지금 당장 고쳐야 할 것:**
1.  **Watchdog Timer** 추가 (멈춤 방지).
2.  **Nextion TX 라인**에 저항 분배 회로 추가 (HW 보호).
3.  **Python 서버**에 파일 잠금(Locking) 또는 DB(SQLite) 도입 (데이터 보호).

**"코드는 거짓말을 하지 않지만, 하드웨어는 언제든 배신할 준비가 되어 있다."**
