# 1_가장간단한예제 설명

이 문서는 Arduino R4 Wifi 보드에서 실행되는 BLE Peripheral 예제 코드에 대한 설명 문서입니다. 이 예제는 ArduinoBLE 라이브러리를 사용하여 BLE 서비스를 통해 1초마다 10부터 20 사이의 랜덤 온도 값을 전송합니다.

## 주요 기능

- **BLE 초기화 및 광고**: 보드가 BLE Peripheral 역할로 동작하도록 초기화하고, 지정된 이름(`ArduinoR4Temp`)으로 BLE 광고를 시작합니다.
- **서비스 및 특성 설정**: 사용자 정의 서비스와 특성을 생성하여, 온도 값을 전송합니다. 특성은 4바이트 버퍼 크기로 설정되어
  최대 3자리 숫자와 문자열 종료를 포함할 수 있습니다.
- **랜덤 온도 데이터 생성**: `random(10, 21)` 함수를 통해 10부터 20 사이의 랜덤 값을 생성하고, 이를 문자형으로 변환하여 BLE 특성을 통해 전송합니다.
- **실시간 데이터 업데이트**: 중앙 기기가 연결되면 1초마다 값을 업데이트하며, BLE 폴링을 수행합니다.

## 코드 구조

### 1. 헤더 및 UUID 정의
- ArduinoBLE 라이브러리를 포함하고, 사용자 정의 서비스와 특성에 사용할 UUID를 정의합니다.

### 2. BLE 서비스 및 특성 생성
- `tempService`: 정의된 UUID를 사용하여 BLE 서비스를 생성합니다.
- `tempCharacteristic`: 숫자 값을 문자열로 전송하기 위해 4바이트 크기로 설정된 BLE 특성을 생성합니다.

### 3. setup() 함수
- 시리얼 통신을 초기화하고, BLE를 초기화합니다.
- 보드의 로컬 이름(`ArduinoR4Temp`)과 서비스를 설정하여 광고를 시작합니다.
- 초기 특성 값은 문자열 "0"으로 설정됩니다.
- `randomSeed` 함수를 사용하여 랜덤 값 생성기를 초기화합니다.

### 4. loop() 함수
- 중앙 기기(스마트폰 등)가 연결될 때까지 BLE 이벤트를 폴링합니다.
- 연결이 확인되면, 중앙 기기가 연결되어 있는 동안 1초마다 랜덤 온도 값을 생성하여 문자열로 변환 후, BLE 특성을 업데이트합니다.
- 연결이 해제되면 해당 정보를 시리얼 모니터를 통해 출력합니다.

## 사용 방법

1. 이 코드를 Arduino R4 Wifi 보드에 업로드합니다.
2. nRF Connect 또는 LightBlue Explorer와 같은 BLE 스캐너 앱으로 보드를 검색합니다. (이 예제는 이름이 "ArduinoR4Temp"로 광고됩니다.)
3. 기기에 연결한 후, 특성의 알림을 활성화하면 1초마다 업데이트되는 온도 값을 확인할 수 있습니다.

## 참고 사항

- BLE 연결은 사용자가 직접 실행해야 하며, 자동 연결되지는 않습니다.
- 온도 값은 문자열 형식으로 전송되므로, 핸드폰 앱에서 쉽게 확인할 수 있습니다.
- 예제에서는 랜덤 값을 사용하지만, 실제 프로젝트에서는 DS18B20 등의 온도 센서를 사용하여 데이터를 전송할 수 있습니다.
