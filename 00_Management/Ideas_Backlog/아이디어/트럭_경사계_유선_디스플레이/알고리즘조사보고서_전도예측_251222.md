# 덤프트럭 전도 예측 알고리즘 조사 보고서

> **작성일:** 2025년 12월 22일  
> **목적:** 단순 기울기 측정의 한계를 보완하는 전도/전복 예측 알고리즘 조사

---

## 1. 서론: 단순 기울기 측정의 한계

단순히 Roll/Pitch 각도만 측정하는 것은 덤프트럭 전도 예측에 **불충분**합니다.

### 1.1 주요 한계점

| 한계 | 설명 |
|------|------|
| **동적 요소 미반영** | 차량 속도, 가속도, 하중 이동 등 시시각각 변하는 요소 반영 불가 |
| **무게중심 변화 무시** | 적재함 상승/하강, 적재물 이동에 따른 CoG(Center of Gravity) 변화 미반영 |
| **지연 경고** | 이미 위험 각도에 도달한 후 경고 → 대응 시간 부족 |
| **환경 요인 배제** | 바람, 지반 침하, 서스펜션 상태 등 외부 요인 고려 불가 |

> [!IMPORTANT]
> 실제 산업용 롤오버 예방 시스템은 **다중 센서 + 알고리즘 기반 예측**을 사용합니다.

---

## 2. 핵심 롤오버 예측 알고리즘

### 2.1 Static Rollover Threshold (SRT) - 정적 전복 임계치

차량이 **일정한 횡가속도**에서 전복되는 한계를 나타내는 지표입니다.

#### 공식
```
SRT = T / (2H)
```

| 변수 | 설명 |
|------|------|
| **T** | 트랙 폭 (Track Width) - 좌우 바퀴 사이 거리 |
| **H** | 무게중심 높이 (Center of Gravity Height) |

#### 의미
- SRT 값이 **낮을수록** 전복 위험 높음
- 일반적인 덤프트럭 SRT: **0.35 ~ 0.50 g** (세단: 1.1~1.3 g)
- 적재함 상승 시 H 증가 → SRT 급격히 감소

#### 적용
```
┌─────────────────────────────────────────────────────────────┐
│  예시: 트랙폭 2.0m, 무게중심 높이 1.5m                        │
│  SRT = 2.0 / (2 × 1.5) = 0.67 g                             │
│                                                              │
│  적재함 올림 시 (H = 2.5m)                                   │
│  SRT = 2.0 / (2 × 2.5) = 0.40 g → 위험 증가!                │
└─────────────────────────────────────────────────────────────┘
```

---

### 2.2 Load Transfer Ratio (LTR) - 하중 전이 비율

실시간으로 좌우 바퀴의 **하중 분포 불균형**을 측정하는 동적 지표입니다.

#### 공식
```
LTR = (Fz_right - Fz_left) / (Fz_right + Fz_left)
```

| 변수 | 설명 |
|------|------|
| **Fz_right** | 우측 바퀴들의 수직 하중 합 |
| **Fz_left** | 좌측 바퀴들의 수직 하중 합 |

#### 해석

| LTR 값 | 상태 | 조치 |
|--------|------|------|
| **0** | 균형 상태 | 정상 |
| **0 ~ 0.6** | 안전 범위 | 모니터링 |
| **0.6 ~ 0.8** | 경고 | 속도 감소, 조향 조정 |
| **0.8 ~ 1.0** | 위험 | 즉시 정지 |
| **1.0** | 한쪽 바퀴 들림 | 전복 임박 |

> [!WARNING]
> **LTR ≥ 0.6**은 산업 표준에서 **롤오버 고위험**으로 간주됩니다.

---

### 2.3 Time-to-Rollover (TTR) - 전복까지 남은 시간

현재 상태에서 **전복까지 남은 예상 시간**을 계산하는 예측 알고리즘입니다.

#### 개념
```
TTR = f(현재 롤 각도, 롤 각속도, 횡가속도, 무게중심 높이)
```

#### 특징
- **사전 경고** 가능 (1~3초 전 예측)
- 운전자 반응 시간 확보
- 능동적 제어 시스템과 연동 가능

---

### 2.4 Predictive LTR (PLTR) - 예측적 하중 전이 비율

기존 LTR의 한계(사후 감지)를 극복하기 위해 **조향각, 속도, 가속도**를 분석하여 **미래 LTR을 예측**합니다.

#### 입력 변수
- 현재 조향각 및 조향 속도
- 차량 속도
- 횡가속도
- 하중 상태

---

## 3. 센서 퓨전 (Sensor Fusion)

단일 센서의 한계를 극복하고 정확도를 높이기 위해 **다중 센서 데이터를 융합**합니다.

### 3.1 필요 센서

| 센서 | 측정값 | 역할 |
|------|--------|------|
| **IMU (가속도계 + 자이로)** | 가속도, 각속도, Roll/Pitch | 기본 자세 추정 |
| **서스펜션 센서** | 각 바퀴 수직 변위 | LTR 계산 |
| **경사계 (Inclinometer)** | 지면 기준 절대 경사 | 기준 각도 제공 |
| **GPS** | 위치, 속도 | 동적 상태 보정 |
| **하중 센서** | 적재량 | 무게중심 추정 |

### 3.2 칼만 필터 (Kalman Filter)

센서 퓨전의 핵심 알고리즘으로, 노이즈와 오차를 최소화합니다.

```
┌──────────────────────────────────────────────────────────────┐
│                    칼만 필터 처리 흐름                        │
├──────────────────────────────────────────────────────────────┤
│  1. 예측 단계 (Predict)                                       │
│     - 이전 상태 + 동적 모델로 현재 상태 예측                    │
│                                                               │
│  2. 측정 단계 (Measure)                                        │
│     - 각 센서에서 실제 측정값 수집                              │
│                                                               │
│  3. 갱신 단계 (Update)                                         │
│     - 예측값과 측정값의 가중 평균으로 최적 추정                  │
│                                                               │
│  4. 반복                                                       │
└──────────────────────────────────────────────────────────────┘
```

#### Extended Kalman Filter (EKF)
- 비선형 시스템에 적용
- 차량 동역학 모델(3-DOF, 7-DOF)과 함께 사용

---

## 4. 차량 동역학 모델

### 4.1 자유도(DOF) 모델 비교

| 모델 | 고려 요소 | 정확도 | 연산 부하 |
|------|----------|--------|----------|
| **2-DOF** | 횡방향, 요(Yaw) | 낮음 | 낮음 |
| **3-DOF** | 횡방향, 요, 롤 | 중간 | 중간 |
| **7-DOF** | 차체 + 4바퀴 독립 | 높음 | 높음 |
| **14-DOF** | 트레일러 포함 | 매우 높음 | 매우 높음 |

### 4.2 덤프트럭에 권장되는 모델
- **최소 3-DOF**: 롤 동역학 필수 포함
- 적재함 상승 시 **가변 무게중심 모델** 필요

---

## 5. 머신러닝 기반 접근법 (최신 동향)

### 5.1 순환신경망 (RNN/LSTM)
- 시계열 센서 데이터 학습
- 과거 패턴 기반 전복 예측
- LTR, TTR 동시 예측 가능

### 5.2 장점
- 복잡한 물리 모델 없이 학습 가능
- 개별 차량 특성 반영 가능
- 예측 정확도 90% 이상 달성 사례

---

## 6. 실용적 구현 제안

### 6.1 최소 시스템 구성

```
┌─────────────────────────────────────────────────────────────┐
│                    권장 센서 구성                            │
├─────────────────────────────────────────────────────────────┤
│  • MPU6050 (6축 IMU): 가속도 + 자이로                        │
│  • 경사계 (MEMS): 절대 기울기 측정                           │
│  • 적재함 각도 센서: 덤핑 상태 감지                           │
│  • (옵션) 서스펜션 변위 센서: 하중 분포 추정                  │
└─────────────────────────────────────────────────────────────┘
```

### 6.2 알고리즘 구현 우선순위

| 우선순위 | 알고리즘 | 난이도 | 효과 |
|---------|---------|-------|------|
| 1️⃣ | 간소화 SRT 기반 경고 | 낮음 | 기본 안전 확보 |
| 2️⃣ | 센서 퓨전 (칼만 필터) | 중간 | 측정 정확도 향상 |
| 3️⃣ | 간소화 LTR 추정 | 중간 | 동적 위험 감지 |
| 4️⃣ | TTR 예측 | 높음 | 사전 경고 |

### 6.3 간소화된 롤오버 위험 지수 (RRI)

실용적인 구현을 위한 **통합 위험 지수**:

```
RRI = w1 × (Roll/Roll_max) + w2 × (Pitch/Pitch_max) + w3 × (Ay/Ay_max)
```

| 변수 | 설명 | 권장 가중치 |
|------|------|-----------|
| **Roll** | 현재 롤 각도 | w1 = 0.4 |
| **Pitch** | 현재 피치 각도 | w2 = 0.2 |
| **Ay** | 횡가속도 | w3 = 0.4 |
| **_max** | 각 변수의 최대 허용값 | - |

#### 위험 레벨
- **RRI < 0.5**: 안전 (녹색)
- **0.5 ≤ RRI < 0.7**: 주의 (황색)
- **0.7 ≤ RRI < 0.9**: 경고 (주황)
- **RRI ≥ 0.9**: 위험 (적색)

---

## 7. 결론 및 권장사항

### 7.1 핵심 결론

1. **단순 기울기 측정만으로는 정확한 전도 예측 불가능**
2. **LTR, SRT, TTR** 등 다양한 지표의 복합 활용 필요
3. **센서 퓨전**을 통한 측정 신뢰도 향상 필수
4. **동적 요소(횡가속도, 하중 이동)** 반드시 고려

### 7.2 개발 로드맵 제안

```mermaid
graph LR
    A[Phase 1<br>기본 센서] --> B[Phase 2<br>센서 퓨전]
    B --> C[Phase 3<br>LTR 추정]
    C --> D[Phase 4<br>TTR 예측]
    D --> E[Phase 5<br>능동 제어]
```

| Phase | 내용 | 기간 |
|-------|------|------|
| 1 | IMU + 경사계 기반 기본 경고 | 2주 |
| 2 | 칼만 필터 기반 센서 퓨전 | 4주 |
| 3 | 간소화 LTR 추정 로직 추가 | 4주 |
| 4 | TTR 기반 사전 경고 | 6주 |
| 5 | ESC 연동 능동 제어 (옵션) | TBD |

---

## 8. 참고 문헌

1. "Heavy Vehicle Rollover Prediction Using Load Transfer Ratio" - SAE International
2. "Static Rollover Threshold Calculation Methods" - NHVR Australia
3. "Sensor Fusion for Vehicle Stability Estimation" - MDPI Sensors
4. "Time-to-Rollover Prediction Using Recurrent Neural Networks" - IEEE
5. "Lateral Load Transfer and Vehicle Rollover" - University of Michigan UMTRI
6. "Kalman Filtering for Vehicle State Estimation" - Diva Portal

---

> **문서 버전:** 1.0  
> **최종 수정:** 2025-12-22
